---
title: SSD が逝去された
emoji: 💥
topics: []
type:
published: true
---

OS 入り SSD が逝去され、数日わちゃわちゃしていました。  
反省のために復旧までの試行錯誤などを文章にしたためておきます。  

## Windows が立ち上がらなくなる

2023-02-02 の朝、PC がブラウザ以外の全ての操作を受け付けなくなりました。  
しばらく放置しても進展がなかったため PC を強制終了したところ、Windows が立ち上がらなくなりました。  

> @proudust  
> Windows が立ち上がらなくなりました。なおインサイダープレビューに参加していたので心当たりしか無いです。  
> [2023-02-02 08:26](https://twitter.com/proudust/status/1620926538979119106)

## Win11 のクリーンインストールを試すも失敗

セーフモードで起動なども一切受け付けない状態だったので、クリーンインストールを試みました。  
幸い USB と使えるノート PC があったので Win11 のインストールメディアは特に問題なく作成できました。  
ところがいざ実行してみると動作が異常に重く、操作する度に数時間待たされる始末でした。  
しかもインストール先のドライブを選択する直前に Win11 の必要スペックを満たさないといわれ続行不可能となってしまいました。[^1]  

> @proudust  
> Win11 をクリーンインストールしようとしたところ、何故かスペックが足らないと言われました。  
> やたらと動作も遅いですし、何かしらのパーツが亡くなりましたかね？  
> [2023-02-03 06:25](https://twitter.com/proudust/status/1621258645198757888)

この後 Win10 でインストールメディアを作り直し再実行するも動作の重さは変わらず、クリーンインストールするだけでは直らなさそうなことがわかりました。

> @proudust  
> Win10 のクリーンインストールは一応できそうな雰囲気がありますが、まだインストール始まってないのに数時間待たされています
> [2023-02-03 20:18](https://twitter.com/proudust/status/1621468132392173570)

[^1]: 復旧後 [PC 正常性チェック](https://go.microsoft.com/fwlink/?LinkId=2156761)で確認したところ、セキュアブートが有効化されていないことが原因だったことがわかりました。  
      解決のためには CSM を無効化した上で Windows を UEFI モードで再インストールする必要があるようなので、新しい SSD が届いてから試そうと思います。

## OS 入り SSD の死亡確認

ストレージが原因ではと山ニューさんから指摘を受けたため、OS 入りの SSD を外して再度インストールメディアを起動してみると、異常な重さが改善されました。  
念のため外した SSD の中身をノート PC で確認しようとしたところ、エクスプローラーがクラッシュし続けたので SSD に異常があることがわかりました。  
山ニューさんありがとうございました。  

> @MeshiMazuMonika  
> なんとなくですけど、ストレージがお亡くなりになったのでは……？どうせクリーンインストールするなら新しいSSDに入れてみてはどうでしょうか？
> [2023-02-03 20:21](https://twitter.com/MeshiMazuMonika/status/1621468824662048771)

というわけで SSD を交換して OS をインストールしようとしますが、インストール先のドライブを選択する段階でエラーが発生しました。

> ⚠️ 選ばれた場所に Windows をインストールできませんでした。メディア ドライブを確認してください。エラーの詳しい情報 0x80300024。

gg ってみると、UEFI の起動優先順位を変更する必要があることがわかりました。  
しかし変更してみても解決せず、最終的に HDD を外すことで先に進みました。

## OS インストール＆初期設定

後は特に問題なくインストールできました。  

インストール後は以下のように初期設定を行います。

1. LAN ケーブルを外し、ローカルアカウントを作成する。  

   皆さんご存じ Windows の初期設定画面でローカルアカウントを作成するための小細工です。
   主にホームディレクトリの名前を自分で決めるために行います。

2. デスクトップが表示されたら先ほど作成したローカルアカウントを MS アカウントに切り替える。  

   私の Windwos 10 Pro ライセンスは MS アカウントと紐づいてしまっているので、直ぐに MS アカウントに切り替えます。

3. MS ストアを開き、アプリインストーラを更新する。
4. [proudust/dotfiles](https://github.com/proudust/dotfiles) を実行する。

   最低限度必要な設定とソフトのインストールは自動化スクリプトを用意しているので実行します。
   ただあまりメンテナンスできていないため、Git のインストール後に無限ループして進まなくなってしまったり、 VSCode や Logicool GHUB などがインストールされないなどの問題はありました。

5. 足りない設定やソフトを追加していく

   Steam や Discord などをインストールしていきます。
   これらは用途によっては不要なため、意図的に自動化から除外していましたが、地味に面倒だったのである程度自動化したさがあります。

## 反省点

1. **OS クリーンインストールをする際はインストールするドライブ以外外しておくべきだった**  

   結果論ではありますが、これをしていれば自力で OS 入りの SSD が逝去されたことに気づけた可能性が高いです。
   また以前 OS クリーンインストールする際、インストール先のドライブを間違えたために生きていたデータも全て吹っ飛ばしてしまうミスをしていました。
   今後は無用なトラブルを避けるためにも、OS クリーンインストールの前にはインストールするドライブ以外を外しておくようにします。

2. **dotfiles はちゃんとメンテナンスするべきだった**  
  
   使用頻度が低いため後回しにしていましたが、今回のような非常事態からの復旧に貴重な休日を消費するのはよろしくないため、今後は時間を作って対応するようにしたいです。
   特に Git のインストール後の無限ループは早めに直したいですね。

3. いざという時の備えが不十分だった

   今回は偶然 USB メモリとノート PC があったので、数日でメイン PC を復活できました。  
   しかし場合によっては当面の間ノート PC を使用することになる可能性もありえたので、メイン PC が使用不可になった場合の備えを用意しておこうと思います。
